{% extends "base.html" %}
{% block title %}{% if is_en %}Publications | NLP Lab{% else %}연구성과 | NLP Lab{% endif %}{% endblock %}
{% block body_class %}public-page public-publications{% endblock %}
{% block content %}
<section class="page-hero">
  <div class="container">
    <p class="eyebrow">{{ "Publications" if is_en else "연구성과" }}</p>
    <h1>{{ "Publications" if is_en else "연구성과" }}</h1>
    <p class="lead">{{ "Recent research outputs" if is_en else "최근 연구 성과" }}</p>
  </div>
</section>
<section class="page-content">
  <div class="container">
    <div class="list-controls" role="group" aria-label="{{ 'Publication year filter' if is_en else '논문 연도 필터' }}">
      <a
        class="filter-chip {% if selected_year is none %}is-active{% endif %}"
        href="{{ '/publications?lang=' ~ lang }}"
      >
        {{ "All years" if is_en else "전체 연도" }}
      </a>
      {% for year_option in years %}
      <a
        class="filter-chip {% if selected_year == year_option %}is-active{% endif %}"
        href="{{ '/publications?year=' ~ year_option ~ '&lang=' ~ lang }}"
      >
        {{ year_option }}
      </a>
      {% endfor %}
    </div>
    {% if publications %}
    <div class="list-stack">
      {% for publication in publications %}
      {% set localized_title = (publication.title_en if is_en else publication.title) or (publication.title if is_en else publication.title_en) %}
      {% set localized_authors = (publication.authors_en if is_en else publication.authors) or (publication.authors if is_en else publication.authors_en) %}
      {% set localized_venue = (publication.venue_en if is_en else publication.venue) or (publication.venue if is_en else publication.venue_en) %}
      <article class="stack-item">
        <p class="meta">{{ publication.year }} · {{ localized_venue }}</p>
        <h3>{{ localized_title }}</h3>
        <p>{{ localized_authors }}</p>
        {% if publication.link %}
        <a class="text-link" href="{{ publication.link }}" target="_blank" rel="noopener noreferrer">Link</a>
        {% endif %}
      </article>
      {% endfor %}
    </div>
    {% else %}
    <p class="empty-state">{{ "No publications found." if is_en else "조회된 논문이 없습니다." }}</p>
    {% endif %}
  </div>
</section>
{% endblock %}
