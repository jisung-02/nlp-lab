<!doctype html>
{% set current_lang = lang | default('kr') %}
{% set is_en_lang = current_lang == 'en' %}
{% set lang_kr_href = lang_kr_url | default(request.url.path ~ '?lang=kr') %}
{% set lang_en_href = lang_en_url | default(request.url.path ~ '?lang=en') %}
<html lang="{{ 'en' if is_en_lang else 'ko' }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}NLP Lab{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', path='images/favicon.ico') }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,500;9..144,700&family=Work+Sans:wght@300;400;500;600;700&display=swap"
    />
    <link rel="stylesheet" href="{{ url_for('static', path='css/reset.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', path='css/common.css') }}" />
    {% block extra_head %}
    <link rel="stylesheet" href="{{ url_for('static', path='css/public.css') }}" />
    {% endblock %}
  </head>
  {% set body_class_value %}{% block body_class %}public-page{% endblock %}{% endset %}
  {% set is_admin_page = "admin-page" in body_class_value %}
  <body class="{{ body_class_value | trim }}">
    <header class="site-header">
      <div class="container header-inner site-header__inner">
        <a class="brand site-brand" href="{{ '/?lang=' ~ current_lang }}">
          <span class="brand-copy">
            <span class="brand-primary-row">
              {% if request.url.path == '/' or is_admin_page %}
              <img
                class="brand-mark"
                src="{{ url_for('static', path='images/khu_magnolia.svg') }}"
                alt=""
                aria-hidden="true"
              />
              {% endif %}
              <span class="brand-top">NLP Lab</span>
            </span>
            <span class="brand-sub">Kyung Hee University</span>
          </span>
        </a>
        {% if is_admin_page %}
        <div class="admin-header-panel">
          <span class="admin-header-panel__title">관리자 콘솔</span>
          <span class="admin-header-panel__sep">|</span>
          <span class="admin-header-panel__page">{% if request.url.path == '/admin' %}대시보드{% elif request.url.path == '/admin/members' %}멤버{% elif request.url.path == '/admin/projects' %}프로젝트{% elif request.url.path == '/admin/publications' %}논문{% elif request.url.path == '/admin/posts' %}게시글{% else %}관리{% endif %}</span>
        </div>
        {% endif %}
        <div class="header-controls">
          <nav class="nav site-nav" aria-label="Primary">
            <a href="{{ '/?lang=' ~ current_lang }}">{{ "About" if is_en_lang else "연구실 소개" }}</a>
            <a href="{{ '/projects?lang=' ~ current_lang }}"
              >{{ "Research" if is_en_lang else "연구 분야" }}</a
            >
            <a href="{{ '/publications?lang=' ~ current_lang }}"
              >{{ "Publications" if is_en_lang else "연구성과" }}</a
            >
            <a href="{{ '/members?lang=' ~ current_lang }}"
              >{{ "Members" if is_en_lang else "구성원" }}</a
            >
            <a href="{{ '/contact?lang=' ~ current_lang }}"
              >{{ "Contact" if is_en_lang else "연락처" }}</a
            >
          </nav>
          <span class="lang-switch" aria-label="Language switcher">
            <a href="{{ lang_kr_href }}" class="{% if not is_en_lang %}active{% else %}inactive{% endif %}"
              >KR</a
            >
            <a href="{{ lang_en_href }}" class="{% if is_en_lang %}active{% else %}inactive{% endif %}"
              >EN</a
            >
          </span>
        </div>
      </div>
    </header>
    <main class="site-main">{% block content %}{% endblock %}</main>
    <footer class="site-footer">
      <div class="container footer-inner">
        <div>
          <h4>NLP Lab</h4>
          <p>{{ "Kyung Hee University NLP Lab" if is_en_lang else "경희대학교 자연어처리 연구실" }}</p>
        </div>
        <div class="footer-meta">
          <p>
            {% if is_en_lang %}© 2026 Kyung Hee University NLP Lab. All rights reserved.{% else %}©
            2026 경희대학교 NLP 연구실. All rights reserved.{% endif %}
          </p>
        </div>
      </div>
    </footer>
    {% block scripts %}
    {% if request.url.path == '/' %}
    <script src="{{ url_for('static', path='js/hero_slider.js') }}" defer></script>
    {% endif %}
    {% if 'admin' not in body_class_value %}
    <script src="{{ url_for('static', path='js/publications_filter.js') }}" defer></script>
    {% endif %}
    {% endblock %}
  </body>
</html>
